{"ast":null,"code":"import _slicedToArray from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{GoogleMap,withScriptjs,withGoogleMap,Marker,InfoWindow}from\"react-google-maps\";import{getApiPath}from\"../../Common\";import yellowIcon from\"../images/Yellow_location.png\";import redIcon from\"../images/Red_Locaion.png\";import greenIcon from\"../images/Green_Location.png\";import\"./NGO-Home.css\";import{toast}from\"react-toastify\";import Pagination from\"../PaginationComponent/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(props){// default coordinates of Vancouver\nvar _useState=useState({lat:49.28273,long:-123.120735}),_useState2=_slicedToArray(_useState,2),currentCoordinate=_useState2[0],setCurrentCoordinates=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),complaintsArr=_useState4[0],setComplaintsArr=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),zoomLevel=_useState6[0],setZoomLevel=_useState6[1];var initialText=\"Change Status\";var options=[\"Accept\",\"Completed\",\"Spam\"];var complaintsUrl=getApiPath()+\"complaint/fetch\";useEffect(function(e){var complaintsUrl=getApiPath()+\"complaint/fetch\";axios.get(complaintsUrl).then(function(res){setComplaintsArr(res.data.complaints);}).catch(function(err){console.log(\"Error :\"+err);});},[setComplaintsArr]);var ShowOnMap=function ShowOnMap(e,coordinates){e.preventDefault();setCurrentCoordinates(coordinates);setZoomLevel(20);};// GetIcon\nvar GetIcon=function GetIcon(complaint){if(complaint.priority===0){return redIcon;}else if(complaint.priority===1){return yellowIcon;}else{return greenIcon;}};// Google Map Function to get Google Map\nfunction Map(){var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedComplatint=_useState8[0],setSelectedComplaint=_useState8[1];return/*#__PURE__*/_jsxs(GoogleMap,{defaultZoom:zoomLevel,defaultCenter:{lat:currentCoordinate.lat,lng:currentCoordinate.long},children:[complaintsArr.map(function(complaint){return/*#__PURE__*/_jsx(Marker,{position:{lat:parseFloat(complaint.location.lat),lng:parseFloat(complaint.location.long)},onClick:function onClick(){setSelectedComplaint(complaint);},icon:{url:GetIcon(complaint),scaledSize:new window.google.maps.Size(30,30)}},complaint._id);}),selectedComplatint&&/*#__PURE__*/_jsx(InfoWindow,{position:{lat:selectedComplatint.location.lat,lng:selectedComplatint.location.long},onCloseClick:function onCloseClick(){setSelectedComplaint(null);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{style:{width:\"100%\",height:\"30px\"},src:selectedComplatint.Image,alt:selectedComplatint.title}),/*#__PURE__*/_jsx(\"h3\",{children:selectedComplatint.title})]})})]});}function HandleComplaintDropDown(option,reportID){var updateComplaintUrl=getApiPath()+\"complaint/updateById/\".concat(reportID);axios.patch(updateComplaintUrl,{state:option}).then(function(res){toast.success(res.data.message,{position:\"top-center\",autoClose:500,hideProgressBar:false,closeOnClick:true});setTimeout(function(){window.location.reload();},1200);}).catch(function(err){console.log(err);toast.error(err.response.data.message,{position:\"top-center\",autoClose:500,hideProgressBar:false,closeOnClick:true});});}var WrappedMap=withScriptjs(withGoogleMap(Map));return/*#__PURE__*/_jsxs(\"div\",{className:\"NGO-Home\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"NGO-Title\",children:\"Recent Complaints\"}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(WrappedMap,{isMarkerShown:true,googleMapURL:\"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyDEcxBYEDNORQY12G_W30I0WufUD3ooOPw \",loadingElement:/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\"}}),containerElement:/*#__PURE__*/_jsx(\"div\",{style:{height:\"400px\",width:\"auto\"}}),mapElement:/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\"}})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"complaintContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"headerSettingContainer\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Complaints\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"cardsContainer\",children:/*#__PURE__*/_jsx(Pagination,{apiUrl:complaintsUrl,cardName:\"NGO-Home\",ShowOnMap:ShowOnMap,options:options,HandleComplaintDropDown:HandleComplaintDropDown,initialText:initialText})})]})]});};export default Homepage;","map":{"version":3,"names":["React","useEffect","useState","axios","GoogleMap","withScriptjs","withGoogleMap","Marker","InfoWindow","getApiPath","yellowIcon","redIcon","greenIcon","toast","Pagination","Homepage","props","lat","long","currentCoordinate","setCurrentCoordinates","complaintsArr","setComplaintsArr","zoomLevel","setZoomLevel","initialText","options","complaintsUrl","e","get","then","res","data","complaints","catch","err","console","log","ShowOnMap","coordinates","preventDefault","GetIcon","complaint","priority","Map","selectedComplatint","setSelectedComplaint","lng","map","parseFloat","location","url","scaledSize","window","google","maps","Size","_id","width","height","Image","title","HandleComplaintDropDown","option","reportID","updateComplaintUrl","patch","state","success","message","position","autoClose","hideProgressBar","closeOnClick","setTimeout","reload","error","response","WrappedMap"],"sources":["C:/Users/param/OneDrive/Documents/sem3/client/src/components/NGO/Homepage.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  GoogleMap,\r\n  withScriptjs,\r\n  withGoogleMap,\r\n  Marker,\r\n  InfoWindow,\r\n} from \"react-google-maps\";\r\nimport { getApiPath } from \"../../Common\";\r\nimport yellowIcon from \"../images/Yellow_location.png\";\r\nimport redIcon from \"../images/Red_Locaion.png\";\r\nimport greenIcon from \"../images/Green_Location.png\";\r\nimport \"./NGO-Home.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport Pagination from \"../PaginationComponent/Pagination\";\r\n\r\nconst Homepage = (props) => {\r\n  // default coordinates of Vancouver\r\n  const [currentCoordinate, setCurrentCoordinates] = useState({\r\n    lat: 49.28273,\r\n    long: -123.120735,\r\n  });\r\n  const [complaintsArr, setComplaintsArr] = useState([]);\r\n  const [zoomLevel, setZoomLevel] = useState(10);\r\n  const initialText = \"Change Status\";\r\n  const options = [\"Accept\", \"Completed\", \"Spam\"];\r\n  let complaintsUrl = getApiPath() + \"complaint/fetch\";\r\n  useEffect(\r\n    (e) => {\r\n      let complaintsUrl = getApiPath() + \"complaint/fetch\";\r\n      axios\r\n        .get(complaintsUrl)\r\n        .then((res) => {\r\n          setComplaintsArr(res.data.complaints);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"Error :\" + err);\r\n        });\r\n    },\r\n    [setComplaintsArr]\r\n  );\r\n\r\n  let ShowOnMap = (e, coordinates) => {\r\n    e.preventDefault();\r\n\r\n    setCurrentCoordinates(coordinates);\r\n    setZoomLevel(20);\r\n  };\r\n\r\n  // GetIcon\r\n  const GetIcon = (complaint) => {\r\n    if (complaint.priority === 0) {\r\n      return redIcon;\r\n    } else if (complaint.priority === 1) {\r\n      return yellowIcon;\r\n    } else {\r\n      return greenIcon;\r\n    }\r\n  };\r\n\r\n  // Google Map Function to get Google Map\r\n  function Map() {\r\n    const [selectedComplatint, setSelectedComplaint] = useState(null);\r\n    return (\r\n      <GoogleMap\r\n        defaultZoom={zoomLevel}\r\n        defaultCenter={{\r\n          lat: currentCoordinate.lat,\r\n          lng: currentCoordinate.long,\r\n        }}\r\n      >\r\n        {complaintsArr.map((complaint) => {\r\n          return (\r\n            <Marker\r\n              key={complaint._id}\r\n              position={{\r\n                lat: parseFloat(complaint.location.lat),\r\n                lng: parseFloat(complaint.location.long),\r\n              }}\r\n              onClick={() => {\r\n                setSelectedComplaint(complaint);\r\n              }}\r\n              icon={{\r\n                url: GetIcon(complaint),\r\n                scaledSize: new window.google.maps.Size(30, 30),\r\n              }}\r\n            />\r\n          );\r\n        })}\r\n\r\n        {selectedComplatint && (\r\n          <InfoWindow\r\n            position={{\r\n              lat: selectedComplatint.location.lat,\r\n              lng: selectedComplatint.location.long,\r\n            }}\r\n            onCloseClick={() => {\r\n              setSelectedComplaint(null);\r\n            }}\r\n          >\r\n            <div>\r\n              <img\r\n                style={{ width: \"100%\", height: \"30px\" }}\r\n                src={selectedComplatint.Image}\r\n                alt={selectedComplatint.title}\r\n              />\r\n              <h3>{selectedComplatint.title}</h3>\r\n            </div>\r\n          </InfoWindow>\r\n        )}\r\n      </GoogleMap>\r\n    );\r\n  }\r\n\r\n  function HandleComplaintDropDown(option, reportID) {\r\n    let updateComplaintUrl = getApiPath() + `complaint/updateById/${reportID}`;\r\n    axios\r\n      .patch(updateComplaintUrl, {\r\n        state: option,\r\n      })\r\n      .then((res) => {\r\n        toast.success(res.data.message, {\r\n          position: \"top-center\",\r\n          autoClose: 500,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n        });\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 1200);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        toast.error(err.response.data.message, {\r\n          position: \"top-center\",\r\n          autoClose: 500,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n        });\r\n      });\r\n  }\r\n\r\n  const WrappedMap = withScriptjs(withGoogleMap(Map));\r\n\r\n  return (\r\n    <div className=\"NGO-Home\">\r\n      <h2 className=\"NGO-Title\">Recent Complaints</h2>\r\n      <div className=\"map-container\">\r\n        <WrappedMap\r\n          isMarkerShown\r\n          googleMapURL=\"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyDEcxBYEDNORQY12G_W30I0WufUD3ooOPw \"\r\n          loadingElement={<div style={{ height: `100%` }} />}\r\n          containerElement={<div style={{ height: `400px`, width: `auto` }} />}\r\n          mapElement={<div style={{ height: `100%` }} />}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"complaintContainer\">\r\n        <div className=\"headerSettingContainer\">\r\n          <h1>Complaints</h1>\r\n        </div>\r\n        <div className=\"cardsContainer\">\r\n          <Pagination\r\n            apiUrl={complaintsUrl}\r\n            cardName=\"NGO-Home\"\r\n            ShowOnMap={ShowOnMap}\r\n            options={options}\r\n            HandleComplaintDropDown={HandleComplaintDropDown}\r\n            initialText={initialText}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}