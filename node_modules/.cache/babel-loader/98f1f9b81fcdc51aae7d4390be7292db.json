{"ast":null,"code":"import _defineProperty from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"./Login.css\";import jwt from\"jwt-decode\";import axios from\"axios\";import{getApiPath,isValidEmail,setToken,setTokenTimeout}from\"../../Common\";import Header from\"../Header/Header\";import LoginBg from\"../project-files/Login-Bg-image.svg\";import leftCorner from\"../project-files/left_corner_login.svg\";import rightCorner from\"../project-files/right_corner_login.svg\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import{faEyeSlash}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginInfo=_useState2[0],setLoginInfo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showPassword=_useState4[0],setShowPassword=_useState4[1];// const [email, setEmail] = useState(\"\");\n// const [password, setPassword] = useState(\"\");\nvar onInputChange=function onInputChange(event){var name=event.target.name;var value=event.target.value;setLoginInfo(_objectSpread(_objectSpread({},loginInfo),{},_defineProperty({},name,value)));};var handleSubmitBtn=function handleSubmitBtn(e){e.preventDefault();if(!isValidEmail(loginInfo.email)){toast.error(\"Email not Valid\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true});return;}var loginUrl=getApiPath()+\"user/login\";console.log(loginUrl);axios.post(loginUrl,loginInfo).then(function(res){var userToken=jwt(res.data.user);// decode your token here\ntoast.success(\"Logged in!!\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true});setTimeout(function(){setToken(res.data.user);console.log(\"user\",userToken);// These function requires token only\nsetTokenTimeout(userToken);window.location.href=\"/\";},2200);}).catch(function(err){var _err$response$data,_err$response$data2;console.log(err);toast.error(\"\".concat((_err$response$data=err.response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message,\"!\"),{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true});console.log((_err$response$data2=err.response.data)===null||_err$response$data2===void 0?void 0:_err$response$data2.message);});};var HandleShowPassword=function HandleShowPassword(e){e.preventDefault();setShowPassword(!showPassword);};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-bg\",children:[/*#__PURE__*/_jsx(\"img\",{src:leftCorner,alt:\"leftCorner\",className:\"leftCornerBg\"}),/*#__PURE__*/_jsx(\"img\",{src:rightCorner,alt:\"rightCorner\",className:\"rightCornerBg\"}),/*#__PURE__*/_jsx(\"img\",{src:LoginBg,alt:\"LoginBg\",className:\"login-bg-img\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"/\",onSubmit:function onSubmit(e){handleSubmitBtn(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"labelInputWrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,autoComplete:\"off\",onChange:function onChange(event){return onInputChange(event);},name:\"email\",id:\"email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"labelInputWrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputPasswordIconWrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",required:true,autoComplete:\"off\",onChange:function onChange(event){return onInputChange(event);},name:\"password\",id:\"password\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{onClick:function onClick(e){HandleShowPassword(e);},className:\"passwordIcon\",icon:faEyeSlash})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"SubmitBtnWrapper\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Log In\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-footer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"|\",children:\"Not a member?\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"|\",children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"SignUp\"})})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-footer\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\" Welcome to\"}),\" DustyPaws\"]})})]})]});};export default Login;","map":{"version":3,"names":["React","useState","jwt","axios","getApiPath","isValidEmail","setToken","setTokenTimeout","Header","LoginBg","leftCorner","rightCorner","Link","toast","faEyeSlash","FontAwesomeIcon","Login","email","password","loginInfo","setLoginInfo","showPassword","setShowPassword","onInputChange","event","name","target","value","handleSubmitBtn","e","preventDefault","error","position","autoClose","hideProgressBar","closeOnClick","loginUrl","console","log","post","then","res","userToken","data","user","success","setTimeout","window","location","href","catch","err","response","message","HandleShowPassword"],"sources":["C:/Users/param/OneDrive/Documents/sem3/client/src/components/User/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Login.css\";\r\nimport jwt from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport {\r\n  getApiPath,\r\n  isValidEmail,\r\n  setToken,\r\n  setTokenTimeout,\r\n} from \"../../Common\";\r\nimport Header from \"../Header/Header\";\r\nimport LoginBg from \"../project-files/Login-Bg-image.svg\";\r\nimport leftCorner from \"../project-files/left_corner_login.svg\";\r\nimport rightCorner from \"../project-files/right_corner_login.svg\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { faEyeSlash } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst Login = () => {\r\n  const [loginInfo, setLoginInfo] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  // const [email, setEmail] = useState(\"\");\r\n  // const [password, setPassword] = useState(\"\");\r\n\r\n  const onInputChange = (event) => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    setLoginInfo({ ...loginInfo, [name]: value });\r\n  };\r\n\r\n  const handleSubmitBtn = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isValidEmail(loginInfo.email)) {\r\n      toast.error(\"Email not Valid\", {\r\n        position: \"top-center\",\r\n        autoClose: 1000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n      });\r\n      return;\r\n    }\r\n    const loginUrl = getApiPath() + \"user/login\";\r\n    console.log(loginUrl);\r\n    axios\r\n      .post(loginUrl, loginInfo)\r\n      .then((res) => {\r\n        const userToken = jwt(res.data.user); // decode your token here\r\n        toast.success(\"Logged in!!\", {\r\n          position: \"top-center\",\r\n          autoClose: 1000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n        });\r\n\r\n        setTimeout(() => {\r\n          setToken(res.data.user);\r\n          console.log(\"user\", userToken);\r\n          // These function requires token only\r\n          setTokenTimeout(userToken);\r\n          window.location.href = \"/\";\r\n        }, 2200);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        toast.error(`${err.response.data?.message}!`, {\r\n          position: \"top-center\",\r\n          autoClose: 1000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n        });\r\n        console.log(err.response.data?.message);\r\n      });\r\n  };\r\n\r\n  const HandleShowPassword = (e) => {\r\n    e.preventDefault();\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-page-container\">\r\n      <Header />\r\n      <div className=\"login-page\">\r\n        <div className=\"login-bg\">\r\n          <img src={leftCorner} alt=\"leftCorner\" className=\"leftCornerBg\" />\r\n          <img src={rightCorner} alt=\"rightCorner\" className=\"rightCornerBg\" />\r\n          <img src={LoginBg} alt=\"LoginBg\" className=\"login-bg-img\" />\r\n        </div>\r\n        <div className=\"form-wrapper\">\r\n          <div className=\"login-form\">\r\n            <h2>Login</h2>\r\n            <form\r\n              action=\"/\"\r\n              onSubmit={(e) => {\r\n                handleSubmitBtn(e);\r\n              }}\r\n            >\r\n              <div className=\"labelInputWrapper\">\r\n                <label htmlFor=\"email\">Email: </label>\r\n                <input\r\n                  type=\"email\"\r\n                  required\r\n                  autoComplete=\"off\"\r\n                  onChange={(event) => onInputChange(event)}\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                />\r\n              </div>\r\n              <div className=\"labelInputWrapper\">\r\n                <label htmlFor=\"password\">Password: </label>\r\n                <div className=\"inputPasswordIconWrapper\">\r\n                  <input\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    required\r\n                    autoComplete=\"off\"\r\n                    onChange={(event) => onInputChange(event)}\r\n                    name=\"password\"\r\n                    id=\"password\"\r\n                  />\r\n                  <FontAwesomeIcon\r\n                    onClick={(e) => {\r\n                      HandleShowPassword(e);\r\n                    }}\r\n                    className=\"passwordIcon\"\r\n                    icon={faEyeSlash}\r\n                  />\r\n                </div>\r\n                <p>\r\n                  <a href=\"#\">Forgot Password?</a>\r\n                </p>\r\n              </div>\r\n              <div className=\"SubmitBtnWrapper\">\r\n                <button>Log In</button>\r\n              </div>\r\n              <div className=\"box-footer\">\r\n                <label htmlFor=\"|\">Not a member?</label>\r\n                <label htmlFor=\"|\">\r\n                  <Link to=\"/signup\">SignUp</Link>\r\n                </label>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div className=\"login-footer\">\r\n          <h3>\r\n            <span> Welcome to</span> DustyPaws\r\n          </h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}