{"ast":null,"code":"import _slicedToArray from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Moment from\"moment\";import EventCalender from\"../images/SingleEventDate.png\";import Loaction from\"../images/SingleEventLocation.png\";import TicketPrice from\"../images/SingleEventTicket.png\";import\"./SingleEvent.css\";import axios from\"axios\";import{getApiPath,getToken,setToken}from\"../../Common\";import{useEffect}from\"react\";import WishlistedSingleEvent from'../images/WishlistedSingleEvent.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SingleEvent=function SingleEvent(props){var event=props.eventData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),eventWishlisted=_useState2[0],setEventWishlisted=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),loggerdInUser=_useState4[0],setLoggedInUser=_useState4[1];var WishlistHandler=function WishlistHandler(eventState){var wishlistURl=getApiPath()+\"user/whishlist/\".concat(loggerdInUser._id);axios.patch(wishlistURl,{eventId:event._id,eventState:eventState}).then(function(res){setToken(res.data.user);}).catch(function(err){console.log(err);});};useEffect(function(e){var userToken=getToken();if(userToken==null){return;}else if(userToken!==null&&userToken!==\"undefined\"&&userToken!==\"\"){var user=userToken===null||userToken===void 0?void 0:userToken.user;setLoggedInUser(user);var whishlistedEvent=userToken===null||userToken===void 0?void 0:userToken.user.whistlist;for(var i=0;i<whishlistedEvent.length;i++){if(whishlistedEvent[i]===event._id){setEventWishlisted(true);}}}},[setLoggedInUser]);return/*#__PURE__*/_jsx(\"div\",{className:\"PopUpContainer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"OverlayShadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"PopUpContent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"closeBtnContainer\",children:/*#__PURE__*/_jsx(\"button\",{onClick:props.TogglePopUp,className:\"closePopUpBtn\",children:\"X\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"EventContentWrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"EventImageWrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:event.Image,alt:event.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ContentWrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"eventContentTitle\",children:event.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date\",children:[/*#__PURE__*/_jsx(\"img\",{src:EventCalender,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:Moment(event.date).format(\"ll\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-address\",children:[/*#__PURE__*/_jsx(\"img\",{src:Loaction,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:event.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-price\",children:[/*#__PURE__*/_jsx(\"img\",{src:TicketPrice,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:event.price})]}),/*#__PURE__*/_jsx(\"p\",{children:event.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"EventControls\",children:[console.log(loggerdInUser),loggerdInUser&&loggerdInUser!==\"\"&&loggerdInUser!==undefined&&loggerdInUser.role!==\"ngo\"?/*#__PURE__*/_jsxs(\"div\",{className:\"EventControls\",children:[eventWishlisted?/*#__PURE__*/_jsx(\"img\",{src:WishlistedSingleEvent,alt:\"wishlisted\"}):null,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.preventDefault();setEventWishlisted(!eventWishlisted);WishlistHandler(!eventWishlisted);},children:eventWishlisted?\"Event Wishlisted\":\"Add to Wishlist\"})]}):\"\"]})]})]})]})})});};export default SingleEvent;","map":{"version":3,"names":["React","useState","Moment","EventCalender","Loaction","TicketPrice","axios","getApiPath","getToken","setToken","useEffect","WishlistedSingleEvent","SingleEvent","props","event","eventData","eventWishlisted","setEventWishlisted","undefined","loggerdInUser","setLoggedInUser","WishlistHandler","eventState","wishlistURl","_id","patch","eventId","then","res","data","user","catch","err","console","log","e","userToken","whishlistedEvent","whistlist","i","length","TogglePopUp","Image","title","date","format","address","price","description","role","preventDefault"],"sources":["C:/Users/param/OneDrive/Documents/sem3/client/src/components/Event/SingleEvent.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Moment from \"moment\";\r\nimport EventCalender from \"../images/SingleEventDate.png\";\r\nimport Loaction from \"../images/SingleEventLocation.png\";\r\nimport TicketPrice from \"../images/SingleEventTicket.png\";\r\nimport \"./SingleEvent.css\";\r\nimport axios from \"axios\";\r\nimport { getApiPath, getToken, setToken } from \"../../Common\";\r\nimport { useEffect } from \"react\";\r\nimport WishlistedSingleEvent from '../images/WishlistedSingleEvent.png'\r\n\r\n\r\n\r\nconst SingleEvent = (props) => {\r\n  let event = props.eventData;\r\n  let [eventWishlisted, setEventWishlisted] = useState(false);\r\n  let [loggerdInUser, setLoggedInUser] = useState(undefined);\r\n\r\n  const WishlistHandler = (eventState) => {\r\n    let wishlistURl = getApiPath() + `user/whishlist/${loggerdInUser._id}`;\r\n    axios\r\n      .patch(wishlistURl, { eventId: event._id, eventState })\r\n      .then((res) => {\r\n        setToken(res.data.user);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(\r\n    (e) => {\r\n      let userToken = getToken();\r\n      if (userToken == null) {\r\n        return;\r\n      } else if (\r\n        userToken !== null &&\r\n        userToken !== \"undefined\" &&\r\n        userToken !== \"\"\r\n      ) {\r\n        let user = userToken?.user;\r\n        setLoggedInUser(user);\r\n        let whishlistedEvent = userToken?.user.whistlist;\r\n        for (var i = 0; i < whishlistedEvent.length; i++) {\r\n          if (whishlistedEvent[i] === event._id) {\r\n            setEventWishlisted(true);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [setLoggedInUser]\r\n  );\r\n\r\n  return (\r\n    <div className=\"PopUpContainer\">\r\n      <div className=\"OverlayShadow\">\r\n        <div className=\"PopUpContent\">\r\n          <div className=\"closeBtnContainer\">\r\n            <button onClick={props.TogglePopUp} className=\"closePopUpBtn\">\r\n              X\r\n            </button>\r\n          </div>\r\n          <div className=\"EventContentWrapper\">\r\n            <div className=\"EventImageWrapper\">\r\n              <img src={event.Image} alt={event.title} />\r\n            </div>\r\n            <div className=\"ContentWrapper\">\r\n              <h3 className=\"eventContentTitle\">{event.title}</h3>\r\n              <div className=\"event-date\">\r\n                <img src={EventCalender} alt=\"\" />\r\n                <p>{Moment(event.date).format(\"ll\")}</p>\r\n              </div>\r\n              <div className=\"event-address\">\r\n                <img src={Loaction} alt=\"\" />\r\n                <p>{event.address}</p>\r\n              </div>\r\n              <div className=\"event-price\">\r\n                <img src={TicketPrice} alt=\"\" />\r\n                <p>{event.price}</p>\r\n              </div>\r\n              <p>{event.description}</p>\r\n              <div className=\"EventControls\">\r\n                {console.log(loggerdInUser)}\r\n                {loggerdInUser &&\r\n                loggerdInUser !== \"\" &&\r\n                loggerdInUser !== undefined &&\r\n                loggerdInUser.role !== \"ngo\" ? (\r\n                  <div className=\"EventControls\">\r\n                    {eventWishlisted ? \r\n                    <img src={WishlistedSingleEvent} alt=\"wishlisted\"/>\r\n                    :\r\n                    null\r\n                    }\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        setEventWishlisted(!eventWishlisted);\r\n                        WishlistHandler(!eventWishlisted);\r\n                      }}\r\n                    >\r\n                      {eventWishlisted ? \"Event Wishlisted\" : \"Add to Wishlist\"}\r\n                    </button>\r\n                    {/* <button>Book Event</button> */}\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                {/* <button>Book Event</button> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleEvent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}