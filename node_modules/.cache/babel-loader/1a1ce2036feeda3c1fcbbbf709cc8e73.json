{"ast":null,"code":"import _slicedToArray from\"C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useEffect}from\"react\";import LineChart from\"../../Charts/LineChart\";import{getApiPath,getToken}from\"../../../Common\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Rewards=function Rewards(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userRewards=_useState2[0],setUserRewards=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalRewardsPoints=_useState4[0],setTotalRewardsPoints=_useState4[1];useEffect(function(){var userToken=getToken();axios.get(getApiPath()+\"user/\".concat(userToken.user._id)).then(function(res){var Urewards=res.data.rewardsEarned;if(Urewards!==\"\"&&Urewards!==undefined){setUserRewards({labels:Urewards.map(function(data){return data.month;}),datasets:[{label:\"Rewards\",data:Urewards.map(function(data){return data.rewards;}),backgroundColor:[\"#deb141\"],borderColor:\"#285b53\",borderWidth:2}]});var points=0;Urewards.map(function(data){return points+=data.rewards;});setTotalRewardsPoints(points);}}).catch(function(err){console.log(\"unable to get request user\");});},[setUserRewards,setTotalRewardsPoints]);return/*#__PURE__*/_jsxs(\"div\",{className:\"userRewardsContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rewardsHeading\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Rewards Trackers\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rewardsChart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"userChart\",children:Object.keys(userRewards).length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(LineChart,{chartData:userRewards})}):/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"RewardsInfo\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Current Rewards\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Count: \",totalRewardsPoints,\" pts\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",rel:\"noopener noreferrer\",children:\"Report Case\"})]})]})]});};export default Rewards;","map":{"version":3,"names":["React","useState","useEffect","LineChart","getApiPath","getToken","axios","Rewards","userRewards","setUserRewards","totalRewardsPoints","setTotalRewardsPoints","userToken","get","user","_id","then","res","Urewards","data","rewardsEarned","undefined","labels","map","month","datasets","label","rewards","backgroundColor","borderColor","borderWidth","points","catch","err","console","log","Object","keys","length"],"sources":["C:/Users/param/OneDrive/Documents/sem3/client/src/components/User/Settings/Rewards.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport LineChart from \"../../Charts/LineChart\";\r\nimport { getApiPath, getToken } from \"../../../Common\";\r\nimport axios from \"axios\";\r\nconst Rewards = () => {\r\n  const [userRewards, setUserRewards] = useState({});\r\n  let [totalRewardsPoints, setTotalRewardsPoints] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let userToken = getToken();\r\n    axios\r\n      .get(getApiPath() + `user/${userToken.user._id}`)\r\n      .then((res) => {\r\n        let Urewards = res.data.rewardsEarned;\r\n        if (Urewards !== \"\" && Urewards !== undefined) {\r\n          setUserRewards({\r\n            labels: Urewards.map((data) => data.month),\r\n            datasets: [\r\n              {\r\n                label: \"Rewards\",\r\n                data: Urewards.map((data) => data.rewards),\r\n                backgroundColor: [\"#deb141\"],\r\n                borderColor: \"#285b53\",\r\n                borderWidth: 2,\r\n              },\r\n            ],\r\n          });\r\n\r\n          let points = 0;\r\n          Urewards.map((data) => {\r\n            return (points += data.rewards);\r\n          });\r\n          setTotalRewardsPoints(points);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"unable to get request user\");\r\n      });\r\n  }, [setUserRewards, setTotalRewardsPoints]);\r\n\r\n  return (\r\n    <div className=\"userRewardsContainer\">\r\n      <div className=\"rewardsHeading\">\r\n        <h1>Rewards Trackers</h1>\r\n      </div>\r\n      <div className=\"rewardsChart\">\r\n        <div className=\"userChart\">\r\n          {Object.keys(userRewards).length > 0 ? (\r\n            <>\r\n              <LineChart chartData={userRewards} />\r\n            </>\r\n          ) : (\r\n            <></>\r\n          )}\r\n          {/* <LineChart chartData={userRewards} /> */}\r\n        </div>\r\n        <div className=\"RewardsInfo\">\r\n          <h4>Current Rewards</h4>\r\n          <p>Count: {totalRewardsPoints} pts</p>\r\n          <a href=\"/\" rel=\"noopener noreferrer\">\r\n            Report Case\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rewards;\r\n"],"mappings":"mIAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,iBAArC,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,6IACA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CACpB,cAAsCN,QAAQ,CAAC,EAAD,CAA9C,wCAAOO,WAAP,eAAoBC,cAApB,eACA,eAAkDR,QAAQ,CAAC,CAAD,CAA1D,yCAAKS,kBAAL,eAAyBC,qBAAzB,eAEAT,SAAS,CAAC,UAAM,CACd,GAAIU,UAAS,CAAGP,QAAQ,EAAxB,CACAC,KAAK,CACFO,GADH,CACOT,UAAU,kBAAaQ,SAAS,CAACE,IAAV,CAAeC,GAA5B,CADjB,EAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,CACb,GAAIC,SAAQ,CAAGD,GAAG,CAACE,IAAJ,CAASC,aAAxB,CACA,GAAIF,QAAQ,GAAK,EAAb,EAAmBA,QAAQ,GAAKG,SAApC,CAA+C,CAC7CZ,cAAc,CAAC,CACba,MAAM,CAAEJ,QAAQ,CAACK,GAAT,CAAa,SAACJ,IAAD,QAAUA,KAAI,CAACK,KAAf,EAAb,CADK,CAEbC,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,SADT,CAEEP,IAAI,CAAED,QAAQ,CAACK,GAAT,CAAa,SAACJ,IAAD,QAAUA,KAAI,CAACQ,OAAf,EAAb,CAFR,CAGEC,eAAe,CAAE,CAAC,SAAD,CAHnB,CAIEC,WAAW,CAAE,SAJf,CAKEC,WAAW,CAAE,CALf,CADQ,CAFG,CAAD,CAAd,CAaA,GAAIC,OAAM,CAAG,CAAb,CACAb,QAAQ,CAACK,GAAT,CAAa,SAACJ,IAAD,CAAU,CACrB,MAAQY,OAAM,EAAIZ,IAAI,CAACQ,OAAvB,CACD,CAFD,EAGAhB,qBAAqB,CAACoB,MAAD,CAArB,CACD,CACF,CAxBH,EAyBGC,KAzBH,CAyBS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACD,CA3BH,EA4BD,CA9BQ,CA8BN,CAAC1B,cAAD,CAAiBE,qBAAjB,CA9BM,CAAT,CAgCA,mBACE,aAAK,SAAS,CAAC,sBAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,uBACE,wCADF,EADF,cAIE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,SAAS,CAAC,WAAf,UACGyB,MAAM,CAACC,IAAP,CAAY7B,WAAZ,EAAyB8B,MAAzB,CAAkC,CAAlC,cACC,sCACE,KAAC,SAAD,EAAW,SAAS,CAAE9B,WAAtB,EADF,EADD,cAKC,kBANJ,EADF,cAWE,aAAK,SAAS,CAAC,aAAf,wBACE,uCADF,cAEE,+BAAWE,kBAAX,UAFF,cAGE,UAAG,IAAI,CAAC,GAAR,CAAY,GAAG,CAAC,qBAAhB,yBAHF,GAXF,GAJF,GADF,CA0BD,CA9DD,CAgEA,cAAeH,QAAf"},"metadata":{},"sourceType":"module"}