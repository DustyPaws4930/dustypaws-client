{"ast":null,"code":"import { __asyncGenerator, __asyncValues, __await, __generator } from \"tslib\";\nimport { Buffer } from \"buffer\";\nexport function getChunkStream(data, partSize, getNextData) {\n  return __asyncGenerator(this, arguments, function getChunkStream_1() {\n    var partNumber, currentBuffer, _a, _b, datum, dataChunk, e_1_1;\n\n    var e_1, _c;\n\n    return __generator(this, function (_d) {\n      switch (_d.label) {\n        case 0:\n          partNumber = 1;\n          currentBuffer = {\n            chunks: [],\n            length: 0\n          };\n          _d.label = 1;\n\n        case 1:\n          _d.trys.push([1, 9, 10, 15]);\n\n          _a = __asyncValues(getNextData(data));\n          _d.label = 2;\n\n        case 2:\n          return [4, __await(_a.next())];\n\n        case 3:\n          if (!(_b = _d.sent(), !_b.done)) return [3, 8];\n          datum = _b.value;\n          currentBuffer.chunks.push(datum);\n          currentBuffer.length += datum.length;\n          _d.label = 4;\n\n        case 4:\n          if (!(currentBuffer.length >= partSize)) return [3, 7];\n          dataChunk = currentBuffer.chunks.length > 1 ? Buffer.concat(currentBuffer.chunks) : currentBuffer.chunks[0];\n          return [4, __await({\n            partNumber: partNumber,\n            data: dataChunk.slice(0, partSize)\n          })];\n\n        case 5:\n          return [4, _d.sent()];\n\n        case 6:\n          _d.sent();\n\n          currentBuffer.chunks = [dataChunk.slice(partSize)];\n          currentBuffer.length = currentBuffer.chunks[0].length;\n          partNumber += 1;\n          return [3, 4];\n\n        case 7:\n          return [3, 2];\n\n        case 8:\n          return [3, 15];\n\n        case 9:\n          e_1_1 = _d.sent();\n          e_1 = {\n            error: e_1_1\n          };\n          return [3, 15];\n\n        case 10:\n          _d.trys.push([10,, 13, 14]);\n\n          if (!(_b && !_b.done && (_c = _a.return))) return [3, 12];\n          return [4, __await(_c.call(_a))];\n\n        case 11:\n          _d.sent();\n\n          _d.label = 12;\n\n        case 12:\n          return [3, 14];\n\n        case 13:\n          if (e_1) throw e_1.error;\n          return [7];\n\n        case 14:\n          return [7];\n\n        case 15:\n          return [4, __await({\n            partNumber: partNumber,\n            data: Buffer.concat(currentBuffer.chunks),\n            lastPart: true\n          })];\n\n        case 16:\n          return [4, _d.sent()];\n\n        case 17:\n          _d.sent();\n\n          return [2];\n      }\n    });\n  });\n}","map":{"version":3,"names":["__asyncGenerator","__asyncValues","__await","__generator","Buffer","getChunkStream","data","partSize","getNextData","arguments","getChunkStream_1","partNumber","currentBuffer","_a","_b","datum","dataChunk","e_1_1","e_1","_c","_d","label","chunks","length","trys","push","next","sent","done","value","concat","slice","error","return","call","lastPart"],"sources":["C:/Users/param/OneDrive/Documents/sem3/client/node_modules/@aws-sdk/lib-storage/dist-es/chunks/getChunkStream.js"],"sourcesContent":["import { __asyncGenerator, __asyncValues, __await, __generator } from \"tslib\";\nimport { Buffer } from \"buffer\";\nexport function getChunkStream(data, partSize, getNextData) {\n    return __asyncGenerator(this, arguments, function getChunkStream_1() {\n        var partNumber, currentBuffer, _a, _b, datum, dataChunk, e_1_1;\n        var e_1, _c;\n        return __generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    partNumber = 1;\n                    currentBuffer = { chunks: [], length: 0 };\n                    _d.label = 1;\n                case 1:\n                    _d.trys.push([1, 9, 10, 15]);\n                    _a = __asyncValues(getNextData(data));\n                    _d.label = 2;\n                case 2: return [4, __await(_a.next())];\n                case 3:\n                    if (!(_b = _d.sent(), !_b.done)) return [3, 8];\n                    datum = _b.value;\n                    currentBuffer.chunks.push(datum);\n                    currentBuffer.length += datum.length;\n                    _d.label = 4;\n                case 4:\n                    if (!(currentBuffer.length >= partSize)) return [3, 7];\n                    dataChunk = currentBuffer.chunks.length > 1 ? Buffer.concat(currentBuffer.chunks) : currentBuffer.chunks[0];\n                    return [4, __await({\n                            partNumber: partNumber,\n                            data: dataChunk.slice(0, partSize),\n                        })];\n                case 5: return [4, _d.sent()];\n                case 6:\n                    _d.sent();\n                    currentBuffer.chunks = [dataChunk.slice(partSize)];\n                    currentBuffer.length = currentBuffer.chunks[0].length;\n                    partNumber += 1;\n                    return [3, 4];\n                case 7: return [3, 2];\n                case 8: return [3, 15];\n                case 9:\n                    e_1_1 = _d.sent();\n                    e_1 = { error: e_1_1 };\n                    return [3, 15];\n                case 10:\n                    _d.trys.push([10, , 13, 14]);\n                    if (!(_b && !_b.done && (_c = _a.return))) return [3, 12];\n                    return [4, __await(_c.call(_a))];\n                case 11:\n                    _d.sent();\n                    _d.label = 12;\n                case 12: return [3, 14];\n                case 13:\n                    if (e_1) throw e_1.error;\n                    return [7];\n                case 14: return [7];\n                case 15: return [4, __await({\n                        partNumber: partNumber,\n                        data: Buffer.concat(currentBuffer.chunks),\n                        lastPart: true,\n                    })];\n                case 16: return [4, _d.sent()];\n                case 17:\n                    _d.sent();\n                    return [2];\n            }\n        });\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}